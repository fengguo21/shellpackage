(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-cb2b"],{"2m8j":function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"b",function(){return r});var i=a("my3Q"),n=a.n(i),o=function(e){return n.a.get(""+e)},r=function(e,t){n.a.set(""+e,t)}},B97m:function(e,t,a){!function(e){"use strict";!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),a=" .timeline { padding: 0; position: relative; list-style: none; font-family: PingFangSC-light, Avenir, Helvetica, Arial, Hiragino Sans GB, Microsoft YaHei, sans-serif; -webkit-font-smoothing: antialiased; margin: 10px 20px; } .timeline:after { position: absolute; content: ''; left: 0; top: 0; width: 1px; height: 100%; background-color: var(--timelineTheme); } .timeline-item { position: relative; margin: 1.5em 0 0 28px; padding-bottom: 1.5em; border-bottom: 1px dotted var(--timelineTheme); } .timeline-item:last-child { border-bottom: none; } .timeline-circle { position: absolute; top: .28em; left: -34px; width: 10px; height: 10px; border-radius: 50%; border: 1px solid var(--timelineTheme); background-color: var(--timelineTheme); z-index: 1; box-sizing: content-box; } .timeline-circle.hollow { background-color: var(--timelineBg); } .timeline-title { position: relative; display: inline-block; /** * BFC inline-block 元素与其兄弟元素、子元素和父元素的外边距都不会折叠（包括其父元素和子元素） */ cursor: crosshair; margin: -.15em 0 15px 28px } .timeline-title:not(:first-child) { margin-top: 28px; } .timeline-title-circle { left: -36px; top: .15em; width: 16px; height: 16px; } .timeline-others { width: 40px; height: auto; top: .2em; left: -48px; line-height: 1; padding: 2px 0; text-align: center; border: none; background-color: var(--timelineBg); } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=a:t.appendChild(document.createTextNode(a)),e.appendChild(t)}}();var t={render:function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{ref:"timeline",staticClass:"timeline"},[this._t("default")],2)},staticRenderFns:[],name:"Timeline",props:{timelineTheme:{type:String,default:"#dbdde0"},timelineBg:{type:String,default:"#fff"}},mounted:function(){var e=this.$refs.timeline;e.style.setProperty("--timelineTheme",this.timelineTheme),e.style.setProperty("--timelineBg",this.timelineBg)}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var a={name:"TimelineItemBase",props:{bgColor:{type:String,default:""},lineColor:{type:String,default:""},hollow:{type:Boolean,default:!1},fontColor:{type:String,default:"#37414a"}},data:function(){return{slotOthers:!1}},computed:{circleStyle:function(){if(this.bgColor||this.lineColor||this.hollow){var e={};return this.bgColor&&(e={"border-color":this.bgColor,"background-color":this.bgColor}),this.lineColor&&(e=Object.assign({},e,{"border-color":this.lineColor})),e}},itemStyle:function(){return{color:this.fontColor}},slotClass:function(){var e="";return this.slotOthers?e="timeline-others":this.hollow&&(e="hollow"),e}},mounted:function(){this.slotOthers=!!this.$refs.others.innerHTML}};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("li",{staticClass:"timeline-item",style:this.itemStyle},[t("div",{ref:"others",staticClass:"timeline-circle",class:this.slotClass,style:this.circleStyle},[this._t("others")],2),this._v(" "),this._t("default")],2)},staticRenderFns:[],extends:a};!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),e.appendChild(t)}}();var n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("li",{staticClass:"timeline-title",style:this.itemStyle},[t("div",{ref:"others",staticClass:"timeline-circle timeline-title-circle",class:this.slotClass,style:this.circleStyle},[this._t("others")],2),this._v(" "),this._t("default")],2)},staticRenderFns:[],extends:a};"undefined"!=typeof window&&window.Vue&&(window.Vue.component(t.name,t),window.Vue.component(i.name,i),window.Vue.component(n.name,n)),e.Timeline=t,e.TimelineItem=i,e.TimelineTitle=n,Object.defineProperty(e,"__esModule",{value:!0})}(t)},GuOX:function(e,t,a){"use strict";var i=a("xpsI");a.n(i).a},K67y:function(e,t,a){"use strict";a.r(t);var i=a("2kRx"),n=a.n(i),o=a("2m8j"),r=a("B97m"),l=a("s6Sh"),s=a("7Qib"),c={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},autoResize:{type:Boolean,default:!0},chartData:{type:Object,required:!0}},data:function(){return{chart:null}},watch:{chartData:{deep:!0,handler:function(e){this.initChart(e)}}},mounted:function(){var e=this;this.initChart(),this.autoResize&&(this.__resizeHanlder=Object(s.a)(function(){e.chart&&e.chart.resize()},100),window.addEventListener("resize",this.__resizeHanlder)),document.getElementsByClassName("sidebar-container")[0].addEventListener("transitionend",this.__resizeHanlder)},beforeDestroy:function(){this.chart&&(this.autoResize&&window.removeEventListener("resize",this.__resizeHanlder),document.getElementsByClassName("sidebar-container")[0].removeEventListener("transitionend",this.__resizeHanlder),this.chart.dispose(),this.chart=null)},methods:{setOptions:function(e){this.chart.setOption({color:["#efb365","#EB8705","#d48265","#91c7ae"],title:{text:"分析结果",textStyle:{fontSize:16,color:"#404040",lineHeight:50,fontWeight:400}},xAxis:{data:this.chartData.date,boundaryGap:!1,axisTick:{show:!1}},grid:{left:20,right:20,bottom:20,top:60,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1},axisLine:{show:!1}},legend:{},series:e})},initChart:function(){var e=[],t={itemStyle:{normal:{lineStyle:{width:2}}},smooth:!1,type:"line",data:this.chartData.value,animationDuration:2800,animationEasing:"cubicInOut"};e.push(t),this.chart=this.$echarts.init(this.$el),this.setOptions(e)}}},h=a("ZrdR"),d=Object(h.a)(c,function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.className,style:{height:this.height,width:this.width}})},[],!1,null,null,null);d.options.__file="LineChart.vue";var u=d.exports,m=a("88Rz"),p=a.n(m);a("+9CQ");var v={props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartData:{type:Array,required:!0}},data:function(){return{chart:null}},mounted:function(){var e=this;this.initChart(this.chartData),this.__resizeHanlder=Object(s.a)(function(){e.chart&&e.chart.resize()},100),window.addEventListener("resize",this.__resizeHanlder)},beforeDestroy:function(){this.chart&&(window.removeEventListener("resize",this.__resizeHanlder),this.chart.dispose(),this.chart=null)},methods:{initChart:function(e){var t=[],a=[];e.forEach(function(e){t.push(e.value),a.push(e.name)}),this.chart=p.a.init(this.$el),this.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},title:{text:"明细",textStyle:{fontSize:16,color:"#404040",lineHeight:50,fontWeight:400}},grid:{top:60,left:"2%",right:"2%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:a,axisTick:{alignWithLabel:!0}}],yAxis:{type:"value",axisTick:{show:!1},axisLine:{show:!1}},series:{name:"访问量",type:"bar",stack:"vistors",barWidth:"20%",data:t,itemStyle:{color:"#eb8705"},animationDuration:6e3}})}}},f=Object(h.a)(v,function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.className,style:{height:this.height,width:this.width}})},[],!1,null,null,null);f.options.__file="BarChart.vue";var b=f.exports,g=a("X9Rj"),_=a("fo8u"),y=a("t3Un");var x={name:"Documentation",components:{DropdownMenu:l.a,Timeline:r.Timeline,TimelineItem:r.TimelineItem,TimelineTitle:r.TimelineTitle,LineChart:u,BarChart:b,mapChart:_.a},data:function(){return{editName:"",behavioutId:"",activeNames:["1"],dialogVisible:!1,eventProps:{value:"value",label:"events_name"},props2:{value:"value",label:"name"},storeList:[],timeProps:{value:"value",label:"name"},behaviors:[{behavior_value:[],behav_time_check:"",behav_attr_check:"",behav_time:[],behav_attr:[]}],attrs:[[]],index:[],behaviourFields:[],timeCircleList:[],timeAttrs:[],EventList:[],lineChartData:{},chinaMapData:[],barChartData:[],chinaMapShow:!1,isFullscreen:!1,resultDetailShow:!1,formLabelWidth:"120px",input2:"demo",local:[[]],form:{name:"behaviortest",lat:18,crowd:"",dateRange:[[]],local:[[]],behavior:[{behavior_name:"",behaviors:[{behavior_value:[],behav_time_check:"",behav_attr_check:"",behav_time:[],behav_attr:[]}]}]},pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},attrSubs:[],steps:[{timeShow:!1,attrShow:!1}],value:""}},computed:{mapheight:function(){return this.isFullscreen?"100%":"300px"},newLocal:function(){for(var e=[],t=0;t<this.local.length;t++){var a={};a.province=this.local[t][0],a.city=this.local[t][1]||"",a.storeId=3===this.local[t].length?this.local[t][2]:"",e.push(a)}return e},newBehaviours:function(){for(var e=this.behaviors,t=0;t<e.length;t++){var a=e[t].behavior_value;console.log(a,"============");var i=a.slice(0);e[t].behavior_value=a[a.length-1],e[t].behavior_values=i}return e}},watch:{form:{handler:function(e,t){t&&!this.changeStatus&&this.form},deep:!0},local:{handler:function(e,t){for(var a=[],i=0;i<e.length;i++){var n={};n.province=e[i][0],n.city=e[i][1]||"",n.storeId=3===e[i].length?e[i][2]:"",a.push(n)}this.form.local=a},deep:!0}},created:function(){this.timeCircle(),this.getBehaviourList(),this.getBehaviourFields(),this.getEventsList(),this.check(),this.timeAttr(),o.a("storeList")?this.storeList=o.a("storeList"):this.getStoreList()},methods:{editNameFn:function(){this.form.name=this.editName,this.dialogVisible=!1},loadUserAnalys:function(){var e=this,t=this.behaviourList.filter(function(t){return parseFloat(t.id)===parseFloat(e.behavioutId)});this.form=t[0].orientation,this.form.behavior.behaviors.forEach(function(e){e.behavior_value=e.behavior_values}),this.local=this.form.local.map(function(e){console.log(e);var t=[];return t[0]=e.province||"",t[1]=e.city||"",t[2]=e.storeId||"",t}),console.log(this.form,this.local,"========================")},behaviorCreate:function(){console.log(this.form,"===================="),function(e){return Object(y.a)({url:"/app/analysis-data/behavior-create",method:"post",data:e})}(this.form).then(function(e){})},crowdCreate:function(){(function(e){return Object(y.a)({url:"/app/analysis-data/behavior-create",method:"post",data:e})})(this.form).then(function(e){})},fullScreen:function(){var e=this;console.log(this.$refs.map),n.a.enabled&&(n.a.toggle(this.$refs.map),this.isFullscreen=!0,n.a.on("change",function(){n.a.isFullscreen?e.isFullscreen=!0:e.isFullscreen=!1}))},selectAttr:function(e,t){console.log(e,t),this.behaviors[e].behav_attr.push(t)},bvalueChange:function(e,t){},addLocal:function(){this.local.push([])},addTime:function(){this.form.dateRange.push([])},attrChange:function(e){console.log(e),this.attrsearch(e[0])},addBehaviour:function(){this.behaviors.push({behavior_value:[],behav_time_check:"",behav_attr_check:"",behav_time:[],behav_attr:[]})},getStoreList:function(e){var t=this;Object(g.a)(e).then(function(e){t.storeList=e.data.data})},attrsearch:function(e){var t=this;(function(e){return Object(y.a)({url:"/app/analysis-data/attrsearch",method:"post",data:e})})({id:e}).then(function(e){console.log(e),t.attrSubs=e.data})},queryBehaviour:function(){var e=this;this.chinaMapShow=!1,function(e){return Object(y.a)({url:"/app/analysis-data/behavior",method:"post",data:e})}(this.form).then(function(t){console.log(t,"==================="),e.lineChartData=t.data.data.chart,e.chinaMapData=t.data.data.province,e.barChartData=t.data.data.olne_tic,e.barChartData.length>0&&(e.chinaMapShow=!0)})},timeAttr:function(){var e=this;(function(e){return Object(y.a)({url:"/app/analysis-data/attr",method:"post",data:e})})().then(function(t){e.timeAttrs=t.data})},timeCircle:function(){var e=this;(function(e){return Object(y.a)({url:"/app/analysis-data/hbtime",method:"post",data:e})})().then(function(t){console.log(t),e.timeCircleList=t.data})},getEventsList:function(){var e=this;(function(e){return Object(y.a)({url:"/app/analysis-data/selevent",method:"post",data:e})})().then(function(t){console.log(t.data.data),e.EventList=t.data.data})},getBehaviourFields:function(){var e=this;(function(e){return Object(y.a)({url:"/app/analysis-data/behaviorfield",method:"post",data:e})})().then(function(t){console.log(t),e.behaviourFields=t.data.data})},getBehaviourList:function(){var e=this;(function(e){return Object(y.a)({url:"/app/analysis-data/behaviorlist",method:"post",data:e})})().then(function(t){console.log(t.data),e.behaviourList=t.data.data})},cancelResultDetail:function(){this.resultDetailShow=!1},check:function(){console.log(this.local),console.log(this.behaviors,"==================="),this.form.behavior=this.newBehaviours,this.form.local=this.newLocal,console.log(this.form),this.queryBehaviour()}}},w=(a("GuOX"),Object(h.a)(x,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container documentation-container"},[a("el-row",[a("el-select",{staticStyle:{float:"right","margin-bottom":"10px"},attrs:{placeholder:"请选择"},on:{change:e.loadUserAnalys},model:{value:e.behavioutId,callback:function(t){e.behavioutId=t},expression:"behavioutId"}},e._l(e.behaviourList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-collapse",[a("el-collapse-item",{attrs:{title:"查询条件  ",name:"1"}},[a("div",[a("div",{staticStyle:{background:"white",padding:"20px 0"}},[a("el-form",{attrs:{size:"small"}},[e.dialogVisible?a("el-form-item",[a("el-input",{staticClass:"edit-input",attrs:{size:"medium"},model:{value:e.editName,callback:function(t){e.editName=t},expression:"editName"}}),e._v(" "),a("el-button",{staticClass:"edit-save",attrs:{size:"medium"},on:{click:e.editNameFn}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1):a("el-form-item",[a("span",{staticClass:"list-title",domProps:{innerHTML:e._s(e.form.name)}}),e._v(" "),a("span",{staticClass:"edit"},[a("i",{staticClass:"el-icon-edit-outline",on:{click:function(t){e.dialogVisible=!0,e.editName=e.form.name}}})])]),e._v(" "),e._l(e.behaviors,function(t,i){return a("div",{key:i},[a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"分析行为"}},[a("el-cascader",{key:i,attrs:{options:e.EventList,props:e.eventProps,placeholder:"可搜索",filterable:"","change-on-select":""},model:{value:e.behaviors[i].behavior_value,callback:function(t){e.$set(e.behaviors[i],"behavior_value",t)},expression:"behaviors[index].behavior_value"}}),e._v(" "),a("span",{on:{click:e.addBehaviour}},[a("svg-icon",{staticStyle:{fill:"#EB8705"},attrs:{"icon-class":"add"}})],1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"-10px"},attrs:{"label-width":e.formLabelWidth}},[a("el-checkbox",{attrs:{label:"限制周期时间","true-label":"1","false-label":""},model:{value:e.behaviors[i].behav_time_check,callback:function(t){e.$set(e.behaviors[i],"behav_time_check",t)},expression:"behaviors[index].behav_time_check"}}),e._v(" "),a("el-checkbox",{attrs:{label:"限制时间属性","true-label":"1","false-label":""},model:{value:e.behaviors[i].behav_attr_check,callback:function(t){e.$set(e.behaviors[i],"behav_attr_check",t)},expression:"behaviors[index].behav_attr_check"}})],1),e._v(" "),e.behaviors[i].behav_time_check?a("el-form-item",{staticStyle:{"margin-left":"60px","margin-top":"-10px"},attrs:{"label-width":e.formLabelWidth,label:"周期时间"}},[a("el-cascader",{attrs:{props:e.timeProps,options:e.timeCircleList,placeholder:"支持搜索",filterable:"","change-on-select":""},model:{value:e.behaviors[i].behav_time,callback:function(t){e.$set(e.behaviors[i],"behav_time",t)},expression:"behaviors[index].behav_time"}})],1):e._e(),e._v(" "),e.behaviors[i].behav_attr_check?a("el-form-item",{key:i,staticStyle:{"margin-top":"-10px","margin-left":"60px"},attrs:{"label-width":e.formLabelWidth,label:"属性"}},[a("el-cascader",{attrs:{props:e.timeProps,options:e.timeAttrs,placeholder:"支持搜索",filterable:"","change-on-select":""},on:{change:e.attrChange},model:{value:e.behaviors[i].behav_attr,callback:function(t){e.$set(e.behaviors[i],"behav_attr",t)},expression:"behaviors[index].behav_attr"}}),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){e.selectAttr(i,e.value)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.attrSubs,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1):e._e()],1)}),e._v(" "),a("el-form-item",{attrs:{"label-width":e.formLabelWidth,label:"分析Y轴指标"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.lat,callback:function(t){e.$set(e.form,"lat",t)},expression:"form.lat"}},e._l(e.behaviourFields,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),e._l(e.local,function(t,i){return a("el-form-item",{key:i,attrs:{"label-width":e.formLabelWidth,label:"地区"}},[a("el-cascader",{attrs:{options:e.storeList,props:e.props2,filterable:"",placeholder:"试试搜索：上海","change-on-select":""},model:{value:e.local[i],callback:function(t){e.$set(e.local,i,t)},expression:"local[index]"}}),e._v(" "),i===e.local.length-1?a("span",{on:{click:e.addLocal}},[a("svg-icon",{staticStyle:{fill:"#EB8705"},attrs:{"icon-class":"add"}})],1):e._e()],1)}),e._v(" "),e._l(e.form.dateRange,function(t,i){return a("el-form-item",{key:i,attrs:{"label-width":e.formLabelWidth,label:"选择时间"}},[a("el-date-picker",{attrs:{"picker-options":e.pickerOptions2,type:"daterange","value-format":"yyyyMMdd","range-separator":"至","start-placeholder":"上线日期","end-placeholder":"下线日期",align:"right"},model:{value:e.form.dateRange[i],callback:function(t){e.$set(e.form.dateRange,i,t)},expression:"form.dateRange[index]"}}),e._v(" "),i===e.form.dateRange.length-1?a("span",{on:{click:e.addTime}},[a("svg-icon",{staticStyle:{fill:"#EB8705"},attrs:{"icon-class":"add"}})],1):e._e()],1)})],2),e._v(" "),a("div",{staticClass:"footer"},[a("el-button",{attrs:{type:"warning"},on:{click:e.check}},[e._v("查询")]),e._v(" "),a("el-button",{on:{click:function(t){e.behaviorCreate("ruleForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{on:{click:function(t){e.crowdCreate("ruleForm")}}},[e._v("创建至人群优选")])],1)],1)])])],1),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"20px","margin-top":"20px"},attrs:{gutter:20}},[a("div",{staticClass:"chart-wrapper"},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"chart-wrapper"},[e.chinaMapShow?a("line-chart",{attrs:{"chart-data":e.lineChartData}}):e._e()],1)])],1)]),e._v(" "),a("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("div",{staticClass:"chart-wrapper"},[e.chinaMapShow?a("bar-chart",{attrs:{"chart-data":e.barChartData}}):e._e()],1)]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{ref:"map",staticClass:"chart-wrapper"},[e.chinaMapShow?a("map-chart",{attrs:{height:e.mapheight,"chart-data":e.chinaMapData},on:{full:e.fullScreen}}):e._e()],1)])],1)],1)},[],!1,null,"11a1b428",null));w.options.__file="index.vue";t.default=w.exports},X9Rj:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return o});var i=a("t3Un");function n(e){return Object(i.a)({url:"/app/analysis-data/dashboard",method:"post",data:e})}function o(e){return Object(i.a)({url:"/app/analysis-data/sellocal",method:"post",data:e})}},xpsI:function(e,t,a){}}]);